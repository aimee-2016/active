<template>
  <div class="ddos-active" ref="ddos-active">
    <div class="banner" style="height:380px">
      <div class="wrap">
        <div class="product">
          <div class="content">
            <!-- <img
              class="banner"
              src="../../../assets/img/active/ddos/ddos-banner.png"
              alt="高仿云服务器限时秒杀"
            > -->
            <img
              class="text"
              src="../../../assets/img/active/ddos/ddos-banner-text2.png"
              alt="高仿云服务器限时秒杀"
              style="margin-top:292px;"
            >
          </div>
        </div>
      </div>
    </div>
    <div class="seckill" ref="seckill">
      <div class="wrap">
        <div class="top">
          <div class="text">
            <p>
              明日预告: {{predictMsg}}
              <!-- <span @click="showModal.ruleForcast=true">更多场次预告 ></span> -->
              <span @click="showModal.ruleKill=true" style="font-size:16px">活动规则></span>
            </p>
            <!-- <p>
              明日预告：2核4G、1核8G云服务器、GPU云服务器8核64G、DMS-50G
              <span @click="showModal.ruleKill=true" style="font-size:16px">活动规则></span>
            </p> -->
          </div>
          <!-- <div class="timer">
            <i>本场秒杀倒计时</i>
            <div>
              <span>{{hh}}</span>:
              <span>{{m1}}</span>
              <span>{{m2}}</span>:
              <span>{{s1}}</span>
              <span>{{s2}}</span>
            </div>
          </div> -->
        </div>
        <div class="product">
          <div v-for="(item,index) in killHostList" :key="index">
            <div class="head">
              <h3>{{killTitle(item.post.servicetype)}}</h3>
              <span class="discount" v-if="item.post.servicetype=='high_ip'">多线防护</span>
              <span v-if="item.post.newusers" class="new">限新用户</span>
            </div>
            <div class="body">
              <div class="params" v-if="item.post.servicetype!='high_ip'">
                <div class="configure">
                  <ul>
                    <li>
                      <i>CPU</i>
                      <span>{{item.post.cpu}}核</span>
                    </li>
                    <li>
                      <i>内存</i>
                      <span>{{item.post.mem}}G</span>
                    </li>
                    <li>
                      <i>宽带</i>
                      <span>{{item.post.bandwith}}M</span>
                    </li>
                    <li>
                      <i>系统盘</i>
                      <span>
                        {{item.post.disksize}}G
                        <span>SSD</span>
                      </span>
                    </li>
                  </ul>
                </div>
                <div v-if="item.post.pronum" class="s">
                  <span class="label">防御：</span>
                  {{ item.post.pronum }}G
                </div>
                <div v-if="item.post.gpu" class="s">
                  <span class="label">GPU：</span>
                  P{{ item.post.gpu }}
                </div>
                <div v-if="item.post.servicetype=='high_host'">
                  <div style="margin-bottom:10px;">
                    <span class="label">区域：</span>
                    {{item.zoneName}}
                  </div>
                  <div class="ddos-system">
                    <span class="label">系统：</span>
                    <Cascader
                      :data="systemDDOSHList"
                      v-model="item.system"
                      style="width:142px;display:inline-block;background:blue"
                    ></Cascader>
                  </div>
                </div>
                <div v-else>
                  <div
                    style="margin-bottom:10px;"
                    class="ddos-zone"
                    :style="{marginTop:item.post.servicetype=='host'?'33px':'0'}"
                  >
                    <span class="label">区域：</span>
                    <Select
                      v-model="item.zone"
                      style="width:142px;display:inline-block"
                      @on-change="changeZoneKill(item,index,'killHostList')"
                    >
                      <Option
                        v-for="item1 in item.zoneList"
                        :value="item1.value"
                        :key="item1.value"
                      >{{ item1.name }}</Option>
                    </Select>
                  </div>
                  <div class="ddos-system">
                    <span class="label">系统：</span>
                    <Cascader
                      :data="item.systemList"
                      v-model="item.system"
                      style="width:142px;display:inline-block"
                    ></Cascader>
                  </div>
                </div>
              </div>
              <div class="params" v-else>
                <div class="configure">
                  <ul>
                    <li>
                      <i>端口数</i>
                      <span>{{item.post.ports}}</span>
                    </li>
                    <li>
                      <i>域名数</i>
                      <span>{{item.post.domains}}</span>
                    </li>
                    <li>
                      <i>宽带</i>
                      <span>{{item.post.bandwith}}M</span>
                    </li>
                  </ul>
                </div>
                <div class="s">
                  <span class="label">DDoS防护：</span>
                  {{item.post.ddospros}}Gbps
                </div>
                <div>
                  <span class="label">cc防护：</span>
                  {{item.post.ccpros}}QPS
                </div>
                <!-- <div>
                  <span class="label">区域：</span>
                  中国大陆
                </div>-->
              </div>
              <div class="cost">
                <div class="price">
                  ￥
                  <span>{{item.price}}</span>
                  /{{item.post.days%12==0?item.post.days/12==1?'年':item.post.days/12+'年':item.post.days==1?'月':item.post.days+'月'}}
                  <i
                    v-if="item.post.explosives==1"
                  >爆款</i>
                  <i v-if="item.post.highdist==1">高配</i>
                </div>
                <div class="origin-price">
                  原价：￥
                  <span>{{item.originPrice}}</span>
                  /{{item.post.days%12==0?item.post.days/12==1?'年':item.post.days/12+'年':item.post.days==1?'月':item.post.days+'月'}}
                </div>
                <div>
                  <!-- <Button
                    class="btn"
                    v-if="item.num==100"
                    style="background:linear-gradient(90deg,rgba(206,206,206,1) 0%,rgba(168,168,168,1) 100%)"
                  >已抢完</Button> -->
                  <Button class="btn" @click="pushOrderKill(item)">立即购买</Button>
                </div>
              </div>
              <!-- <div class="percentage">
                <span>已抢购{{item.num}}%</span>
              </div> -->
            </div>
          </div>
        </div>
        <div class="tips">温馨提示，秒杀产品不支持7天无理由退款；购买区域不同，价格会有差异，请确认之后再进行购买。</div>
      </div>
    </div>
    <!-- 活动规则 -->
    <transition name="fade">
      <div class="overlay" @click.stop="showModal.ruleKill=true" v-if="showModal.ruleKill">
        <div class="rule-modal">
          <div class="header">
            <span>秒杀活动规则</span>
            <img src=../../../assets/img/active/ddos/ddos-close-icon.png alt="关闭图标" @click.stop="showModal.ruleKill=false">
          </div>
          <div class="body">
            <p>1、活动时间：2019.8.16-2019.11.15。</p>
            <p>2、活动对象：新老用户皆可参与。</p>
            <p>3、数量限制：活动期间同一用户（同一手机、邮箱、实名认证用户视为同一用户）按照不同的配置进行秒杀,每次秒杀每款配置限抢购1台。</p>
            <p>4、参与本次活动购买的产品不能进行退款。</p>
            <p>5、此次活动产品不能用于转售，不能用于第三方业务，只能用于自身业务。如若利用资源从事违法违规行为的用户，新睿云有权收回使用资格，并且不予退款。</p>
            <p>6、购买时不可使用任何优惠券和现金券，秒杀活动不支持会员折扣。</p>
            <p>7、活动最终解释权为新睿云所有。</p>
          </div>
          <div class="footer">
            <div class="wrap-f">
              <Button class="btn" @click.stop="showModal.ruleKill=false">我知道了</Button>
            </div>
          </div>
        </div>
      </div>
    </transition>
    <transition name="fade">
      <div class="overlay" @click.stop="showModal.ruleFT=true" v-if="showModal.ruleFT">
        <div class="rule-modal">
          <div class="header">
            <span>8折优惠活动规则</span>
            <img src=../../../assets/img/active/ddos/ddos-close-icon.png alt="关闭图标" @click.stop="showModal.ruleFT=false">
          </div>
          <div class="body">
            <p>1、活动时间：2019.7.25-2019.9.25。</p>
            <p>2、活动对象：平台已完成实名认证的新老用户。</p>
            <p>3、配置选择：2核4G/2核8G/4核8G/4核16G；带宽默认5M，系统盘默认40G，不含数据盘。</p>
            <p>4、该活动购买的资源不支持退款，不支持优惠券抵扣，支持会员折扣。</p>
          </div>
          <div class="footer">
            <div class="wrap-f">
              <Button class="btn" @click.stop="showModal.ruleFT=false">我知道了</Button>
            </div>
          </div>
        </div>
      </div>
    </transition>
    <transition name="fade">
      <div class="overlay" @click.stop="showModal.ruleGT=true" v-if="showModal.ruleGT">
        <div class="rule-modal">
          <div class="header">
            <span>送域名活动规则</span>
            <img src=../../../assets/img/active/ddos/ddos-close-icon.png alt="关闭图标" @click.stop="showModal.ruleGT=false">
          </div>
          <div class="body">
            <p>1、活动时间：2019.7.25-2019.9.25。</p>
            <p>2、活动对象：平台已完成实名认证的新老用户。</p>
            <p>3、数量限制：云服务器产品每个用户限购7台（若有更多需求，可向客服申请提高配额）</p>
            <p>4、参与本次活动购买的产品不能进行退款。</p>
            <p>5、此次产品不能用于转售，不能用于第三方业务，只能用于自身业务。如若利用资源从事违法违规行为的用户，新睿云有权收回使用资格，并且不予退款。</p>
            <p>6、购买时不可使用任何其它优惠券和现金券，支持会员折扣，188元域名无门槛抵用券仅用于域名购买，有效期为1年。</p>
            <p>7、活动最终解释权为新睿云所有。</p>
          </div>
          <div class="footer">
            <div class="wrap-f">
              <Button class="btn" @click.stop="showModal.ruleGT=false">我知道了</Button>
            </div>
          </div>
        </div>
      </div>
    </transition>
    <transition name="fade">
      <div class="overlay" @click.stop="showModal.ruleForcast=true" v-if="showModal.ruleForcast">
        <div class="rule-modal" style="width:680px;">
          <div class="header">
            <span>更多秒杀场次预告</span>
            <img src=../../../assets/img/active/ddos/ddos-close-icon.png alt="关闭图标" @click.stop="showModal.ruleForcast=false">
          </div>
          <div class="body">
            <Table border :columns="columnsForcast" :data="dataForcast" size="large"></Table>
          </div>
          <div class="footer">
            <Button class="btn" @click.stop="showModal.ruleForcast=false">返回活动页</Button>
          </div>
        </div>
      </div>
    </transition>
    <!-- 身份验证弹窗 -->
    <Modal
      v-model="showModal.cashverification"
      :scrollable="true"
      :closable="true"
      :width="520"
      :mask-closable="false">
      <p slot="header" class="modal-header-border">
        <span class="universal-modal-title">身份验证</span>
      </p>
      <div class="modal-content-s">
        <div>
          <p
            class="lh24"
            style="font-size:14px;font-family:MicrosoftYaHei;color:rgba(51,51,51,1);line-height:24px;"
          >为保障您的账户安全，请进行手机验证：</p>
        </div>
      </div>
      <div class="modal-content-s">
        <Form
          ref="cashverification"
          label-position="left"
          :model="formCustom"
          :rules="ruleCustom"
          style="width: 500px;"
        >
          <FormItem prop="VerificationPhone">
            <Input
              v-model="formCustom.VerificationPhone"
              placeholder="请输入手机号码"
              style="width: 300px;"
            ></Input>
          </FormItem>
          <FormItem prop="Verificationcode">
            <Input
              v-model="formCustom.Verificationcode"
              placeholder="请输入随机验证码"
              style="width: 300px;"
            ></Input>
            <img
              :src="imgSrc"
              @click="imgSrc=`user/getKaptchaImage.do?t=${new Date().getTime()}`"
              style="height:32px;vertical-align: middle;margin-left: 10px;"
            >
          </FormItem>
          <FormItem prop="messagecode">
            <Input v-model="formCustom.messagecode" placeholder="请输入收到的验证码" style="width: 300px;"></Input>
            <Button
              type="primary"
              @click="getPhoneCode('code')"
              :disabled="formCustom.newCodeText !='获取验证码'"
              style="margin-left: 10px;"
            >{{formCustom.newCodeText}}</Button>
          </FormItem>
        </Form>
      </div>
      <div class="modal-content-s divall">
        <div
          style="width: 91%;margin-left: 4%;margin-top: 10px;font-size: 14px;margin-bottom: 20px;"
        >
          <p style="float: left;line-height:24px;">没有收到验证码？</p>
          <br>
          <p style="line-height:24px;">
            1、网络异常可能会造成短信丢失，请
            <span
              class="spanaa"
              :class="{notallow:formCustom.newCodeText !='获取验证码'}"
              @click="getPhoneCode('againCode')"
            >重新获取</span>或
            <span
              class="spanaa"
              :class="{notallow:formCustom.newCodeText !='获取验证码'}"
              @click.prevent="getPhoneCode('voice')"
            >接收语音验证码</span>。
          </p>
          <p v-if="authInfo&&authInfo.checkstatus==0" style="line-height:24px;">
            2、如果手机已丢失或停机，请
            <span
              class="spanaa"
              @click="showModal.modifyPhoneID = true;showModal.cashverification=false"
            >通过身份证号码验证</span>或
            <a href="https://kfi.xrcloud.net/work">提交工单</a>更改手机号。
          </p>
          <p v-if="!authInfo||authInfo&&authInfo.checkstatus!=0" style="line-height:24px;">
            2、如果手机已丢失或停机，请
            <a href="https://kfi.xrcloud.net/work">提交工单</a>或
            <a
              target="_blank"
              :href="`tencent://message/?uin=${$store.state.qq.qqnumber}&amp;Site=www.cloudsoar.com&amp;Menu=yes`"
              class="spanaa"
              style="font-size: 13px;"
            >联系客服</a>更改手机号。
          </p>
        </div>
      </div>
      <p slot="footer" class="modal-footer-s">
        <Button @click="showModal.cashverification = false">取消</Button>
        <Button type="primary" :disabled="disabled" @click="Callpresentation">确定</Button>
      </p>
    </Modal>
    <!-- 人脸识别二维码弹出框 -->
    <Modal
      v-model="showModal.qrCode"
      width="550"
      :scrollable="true"
      :mask-closable="false"
      :closable="false">
      <p slot="header" class="modal-header-border">
        <span class="universal-modal-title">扫码认证</span>
      </p>
      <div class="universal-modal-content-flex qrcode-modal">
        <p class="p-top">认证完成之前，请勿关闭或者切换此页面，否则可能导致认证失败</p>
        <p>请使用手机扫描二维码，并根据提示完成实名认证</p>
        <p v-show="authStatus" class="p-top">您的实名认证提交失败，请刷新二维码重新认证</p>
        <div class="qr-code">
          <vue-q-art :config="qrConfig"></vue-q-art>
          <div
            class="shade"
            :class="{scanSuccess: codeLoseEfficacy=== 'scanSuccess'}"
            v-show="codeLoseEfficacy"
          ></div>
        </div>
        <p class="p-bottom">
          若二维码失效或异常，请
          <span @click="refreshQRCode">刷新</span>
        </p>
      </div>
      <div slot="footer" class="modal-footer-border">
        <Button type="primary" @click="showModal.qrCode = false">确定</Button>
      </div>
    </Modal>
    <!-- 弹窗提示 -->
    <transition name="fade">
      <div class="overlay" @click.stop="showModal.hint=true" v-if="showModal.hint">
        <div class="rule-modal" style="width:400px;">
          <div class="header">
            <span>提示</span>
            <img src=../../../assets/img/active/ddos/ddos-close-icon.png alt="关闭图标" @click.stop="showModal.hint=false">
          </div>
          <div class="body" style="text-align:center">
            <div>{{hintMsg}}</div>
          </div>
          <div class="footer">
            <Button class="btn" @click.stop="showModal.hint=false">确认</Button>
          </div>
        </div>
      </div>
    </transition>
    <!-- 弹窗提示 -->
    <transition name="fade">
      <div class="overlay" @click.stop="showModal.authHint=true" v-if="showModal.authHint">
        <div class="rule-modal" style="width:400px;">
          <div class="header">
            <span>提示</span>
            <img src=../../../assets/img/active/ddos/ddos-close-icon.png alt="关闭图标" @click.stop="showModal.authHint=false">
          </div>
          <div class="body" style="text-align:center">
            <div>抱歉，人脸识别实名认证失败！您也可以 前往用户中心上传身份证照片进行实名认证。</div>
          </div>
          <div class="footer">
            <Button class="btn" @click.stop="toAuthPage()">去实名认证</Button>
          </div>
        </div>
      </div>
    </transition>
  </div>
</template>

<script type="text/ecmascript-6">
import axios from 'axios'
import reg from '../../../util/regExp'
import VueQArt from 'vue-qart'
import $ from 'jquery'
import throttle from 'throttle-debounce/debounce'
export default {
  data () {
    const validaRegisteredPhone = (rule, value, callback) => {
      if (!value) {
        return callback(new Error('电话号码不能为空'));
      }
      if (!(/^1(3|4|5|7|8|9)\d{9}$/.test(value)) && !(/^0\d{2,3}-?\d{7,8}$/.test(value))) {
        callback(new Error('请输入正确的电话号码'));
      } else {
        callback()
      }
    }
    const validaRegisteredID = (rule, value, callback) => {
      if (!reg.IDCardVail(value)) {
        callback(new Error('请输入正确的身份证号码'));
      } else {
        callback()
      }
    }
    const validaRegisteredName = (rule, value, callback) => {
      if (!value) {
        return callback(new Error('联系人不能为空'));
      }
      if ((/[`~!@#$%^&*()_+<>?:"{},.\/;'[\]]/im.test(value)) || (/[·！#￥（——）：；“”‘、，|《。》？、【】[\]]/im.test(value)) || (/\s+/.test(value)) || (/^[0-9]*$/.test(value))) {
        callback(new Error('输入姓名不能包含特殊字符、空格或是纯数字'));
      } else {
        callback()
      }
    }
    return {
      showModal: {
        rule: false,
        ruleKill: false,
        ruleFT: false,
        ruleGT: false,
        ruleForcast: false,
        qrCode: false,
        cashverification: false,
        hint: false,
        authHint: false
      },
      hintMsg: '',
      qrConfig: {
        value: '',
        imagePath: require('../../../assets/img/pay/payBackground.png'),
        filter: 'black',
        size: 500
      },
      // 二维码失效
      codeLoseEfficacy: '',
      tempCode: '',
      codeTimer: null,
      authStatus: false,
      //验证码和短信验证
      formCustom: {
        VerificationPhone: '',
        //图片随机码
        Verificationcode: '',
        //短信验证码
        messagecode: '',
        newCodeText: '获取验证码',
        codeText: '获取验证码',
      },
      ruleCustom: {
        VerificationPhone: [{
          required: true,
          validator: validaRegisteredPhone,
          trigger: 'blur'
        }],
        Verificationcode: [{
          required: true,
          message: '请输入图形验证码',
          trigger: 'blur'
        }],
        messagecode: [{
          required: true,
          message: '请输入收到的验证码',
          trigger: 'blur'
        },]
      },
      regExpObj: {
        phone: /^1[3|4|5|8|9|6|7]\d{9}$/,
        email: /^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,
        password: /(?!(^[^a-z]+$))(?!(^[^A-Z]+$))(?!(^[^\d]+$))^[\w`~!#$%_()^&*,-<>?@.+=]{8,32}$/
      },
      systemDDOSHList: [{
        value: 'window',
        label: 'Windows',
        children: []
      }, {
        value: 'centos',
        label: 'Centos',
        children: [],
      },
      {
        value: 'debian',
        label: 'Debian',
        children: [],
      },
      {
        value: 'ubuntu',
        label: 'Ubuntu',
        children: [],
      }],
      system1: [],
      // navs: [
      //   { title: '云产品', text: '限时秒杀', distance: 300, distanceM: 0},
      //   { title: '高防云服务器', text: '首月8折优惠', distance: 1000, distanceM: 0},
      //   { title: '超低折扣', text: '买时长送域名', distance: 1900, distanceM: 0},
      //   { title: '自选配置', text: '打折再送时长', distance: 2800, distanceM: 0},
      // ],
      // selectedNav: 0,
      killHostList: [
        {
          headline: '高防云服务器',
          new: 0,
          hot: 1,
          post: {},
          pronum: 100,
          cpu: 1,
          mem: 2,
          bandwith: 3,
          disksize: 40,
          timeList: [],
          time: 180,
          systemList: [{
            value: 'window',
            label: 'Windows',
            children: []
          }, {
            value: 'centos',
            label: 'Centos',
            children: [],
          },
          {
            value: 'debian',
            label: 'Debian',
            children: [],
          },
          {
            value: 'ubuntu',
            label: 'Ubuntu',
            children: [],
          }],
          system: [],
          zoneList: [],
          zone: '',
          zoneName: '',
          price: '69',
          originPrice: '176.72',
          configId: '',
          num: ''
        },
        {
          headline: '高防云服务器',
          new: 0,
          hot: 0,
          post: {},
          pronum: 100,
          cpu: 1,
          mem: 2,
          bandwith: 3,
          disksize: 40,
          timeList: [],
          time: 180,
          systemList: [{
            value: 'window',
            label: 'Windows',
            children: []
          }, {
            value: 'centos',
            label: 'Centos',
            children: [],
          },
          {
            value: 'debian',
            label: 'Debian',
            children: [],
          },
          {
            value: 'ubuntu',
            label: 'Ubuntu',
            children: [],
          }],
          system: [],
          zoneList: [],
          zone: '',
          zoneName: '',
          price: '69',
          originPrice: '176.72',
          configId: '',
          num: ''
        },
        {
          headline: '弹性云服务器',
          new: 1,
          hot: 1,
          post: {},
          cpu: 1,
          mem: 2,
          bandwith: 3,
          disksize: 40,
          timeList: [],
          time: 180,
          systemList: [{
            value: 'window',
            label: 'Windows',
            children: []
          }, {
            value: 'centos',
            label: 'Centos',
            children: [],
          },
          {
            value: 'debian',
            label: 'Debian',
            children: [],
          },
          {
            value: 'ubuntu',
            label: 'Ubuntu',
            children: [],
          }],
          system: [],
          zoneList: [],
          zone: '',
          zoneName: '',
          price: '69',
          originPrice: '176.72',
          configId: '',
          num: ''
        },
        {
          headline: 'GPU云服务器',
          new: 1,
          hot: 0,
          post: {},
          gpu: 100,
          cpu: 1,
          mem: 2,
          bandwith: 3,
          disksize: 40,
          timeList: [],
          time: 180,
          systemList: [{
            value: 'window',
            label: 'Windows',
            children: []
          }, {
            value: 'centos',
            label: 'Centos',
            children: [],
          },
          {
            value: 'debian',
            label: 'Debian',
            children: [],
          },
          {
            value: 'ubuntu',
            label: 'Ubuntu',
            children: [],
          }],
          system: [],
          zoneList: [],
          zone: '',
          zoneName: '',
          price: '69',
          originPrice: '176.72',
          configId: '',
          num: ''
        },
        {
          headline: 'DDOS高防IP',
          new: 0,
          hot: 0,
          post: {},
          bandwith: 50,
          ports: 50,
          ddospros: 50,
          domains: 100,
          ccpros: 200000,
          timeList: [],
          time: 180,
          systemList: [{
            value: 'window',
            label: 'Windows',
            children: []
          }, {
            value: 'centos',
            label: 'Centos',
            children: [],
          },
          {
            value: 'debian',
            label: 'Debian',
            children: [],
          },
          {
            value: 'ubuntu',
            label: 'Ubuntu',
            children: [],
          }],
          system: [],
          zoneList: [],
          zone: '3e483b69-ea57-40c6-9fba-d470d665b238',
          zoneName: '',
          price: '69',
          originPrice: '176.72',
          configId: '',
          num: ''
        }
      ],
      zoneListHot: [],
      ddosList: [
        {
          post: [],
          postOne: {},
          config: '2核4G',
          bandwith: 5,
          zone: '华东一区',
          zoneName: '',
          systemList: [],
          system: [],
          diskList: [60, 100, 200],
          disk: 60,
          price: 707.23,
          originPrice: 852.12
        },
        {
          post: [],
          postOne: {},
          config: '2核8G',
          bandwith: 5,
          zone: '华东一区',
          zoneName: '',
          systemList: [],
          system: [],
          diskList: [60, 100, 200],
          disk: 60,
          price: 790.26,
          originPrice: 852.12
        },
        {
          post: [],
          postOne: {},
          config: '4核8G',
          bandwith: 5,
          zone: '华东一区',
          zoneName: '',
          systemList: [],
          system: [],
          diskList: [60, 100, 200],
          disk: 60,
          price: 895.67,
          originPrice: 852.12
        },
        {
          post: [],
          postOne: {},
          config: '4核16G',
          bandwith: 5,
          zone: '华东一区',
          zoneName: '',
          systemList: [],
          system: [],
          diskList: [60, 100, 200],
          disk: 60,
          price: 995.27,
          originPrice: 852.12
        }
      ],
      listGT: [
        {
          post: [],
          postOne: {},
          time: 90,
          systemList: [],
          system: [],
          zone: '',
          zoneName: '华东一区',
          price: '69',
          originPrice: '176.72',
        },
        {
          post: [],
          postOne: {},
          time: 90,
          systemList: [],
          system: [],
          zoneName: '华东一区',
          price: '69',
          originPrice: '176.72',
        },
        {
          post: [],
          postOne: {},
          time: 90,
          systemList: [],
          system: [],
          zone: '',
          zoneName: '华东一区',
          price: '69',
          originPrice: '176.72',
        },
        {
          post: [],
          postOne: {},
          time: 90,
          systemList: [],
          system: [],
          zone: '',
          zoneName: '华东一区',
          price: '69',
          originPrice: '176.72',
        }
      ],
      hh: '',
      m1: '',
      m2: '',
      s1: '',
      s2: '',
      columnsForcast: [
        {
          title: '秒杀时间',
          key: 'date',
          className: 'demo-table-info-column',
          width: 120
        },
        {
          title: '该场次产品',
          key: 'freevmconfigs',
          render: (h, params) => {
            let arrayF = params.row.freevmconfigs
            let text1 = []
            let text2 = ''
            for (let i = 0; i < arrayF.length; i++) {
              if (arrayF[i].type == 'high_host') {
                text2 = '高防云服务器' + arrayF[i].value + ','
              } else if (arrayF[i].type == 'host') {
                text2 = '云服务器' + arrayF[i].value + ','
              } else if (arrayF[i].type == 'G5500') {
                text2 = 'GPU云服务器' + arrayF[i].value + ','
              } else if (arrayF[i].type == 'high_ip') {
                text2 = '' + arrayF[i].value + ''
              }
              text1.push(text2)
            }
            return h('div', {
              style: {
                paddingTop: '6px',
                paddingBottom: '6px',
                lineHeight: '24px'
              }
            }, text1.join(''));
          }
        },
        {
          title: '状态',
          key: 'flag',
          width: 80,
          render: (h, params) => {
            let text = params.row.flag == 1 ? '进行中' : '未开始'
            if (params.row.flag == 1) {
              return h('div', {
                style: {
                  color: '#FF881C'
                }
              }, '进行中')
            } else {
              return h('div', '未开始')
            }
          }
        }
      ],
      dataForcast: [],
      imgSrc: 'https://kfactivity.xrcloud.net/user/getKaptchaImage.do',
      authErrorText: '',
      leftTime1: '',
      predictMsg: ''
    }
  },
  created () {
    this.predict()
    // this.getTime()
    this.refreshData()
    this.getConfigureKill()
    this.getSubsection()
    // this.activityForecast()
    // this.getConfigureDDOS('55', 'listGT')
    // this.getConfigureDDOS('54', 'ddosList')
    // this.getSystemDDOS()
  },
  mounted () {
    // let topArr = [0,this.$refs['first-month'].offsetTop,this.$refs['super-discount'].offsetTop,this.$refs['give-time'].offsetTop] 
    // this.navs.forEach((item,index)=>{
    //   item.distance = topArr[index]
    //   item.distanceM =topArr[index+1]
    //   if (index==3) {
    //     item.distanceM =topArr[index]+this.$refs['give-time'].offsetHeight
    //   }
    // })
    // window.addEventListener('scroll', throttle(100, ()=> {
    //   this.selectedNav = document.body.scrollTop || document.documentElement.scrollTop;
    // }))
  },
  methods: {
    predict() {
      axios.get('activity/getActivityTrailer2.do',{
        params:{
          activityNum: 53
        }
      }).then(response => {
        if (response.status == 200 && response.data.status == 1) {
          this.predictMsg = response.data.message
        }
      })
    },
    init () {
      axios.get('user/GetUserInfo.do').then(response => {
        if (response.status == 200 && response.data.status == 1) {
          this.$store.commit('setAuthInfo', {
            authInfo: response.data.authInfo,
            userInfo: response.data.result,
            authInfoPersion: response.data.authInfo_persion
          })
        }
      })
    },
    // 53    高防云服务器，限时秒杀
    // 54    高防服务器首月8折优惠
    // 55    超低折扣 买时长送域名
    // 56    自选配置，打折再送时长
    activityForecast () {
      axios.get('activity/getActivityTrailer.do', {
        params: {
          activityNum: '53'
        }
      }).then(response => {
        if (response.status == 200 && response.data.status == 1) {
          this.dataForcast = response.data.result
        }
      })
    },
    // 获取活动配置,区域
    getConfigureKill () {
      let url = 'activity/getActInfoById.do'
      axios.get(url, {
        params: {
          activityNum: '53'
        }
      }).then(res => {
        if (res.data.status == 1 && res.status == 200) {
          //参数赋值
          let originArr = res.data.result.freevmconfigs
          this.killHostList.forEach((item, index) => {
            item.post = originArr[index]
          })
          //区域赋值
          this.killHostList.forEach((item, index) => {
            if (item.post.servicetype == 'high_host') {
              item.zoneName = res.data.result.optionalAreaHighPrevention[0].name
              item.zone = res.data.result.optionalAreaHighPrevention[0].value
              this.getPriceKill(item)
            } else if (item.post.servicetype == 'host') {
              item.zoneList = res.data.result.optionalArea
              item.zone = res.data.result.optionalArea[0].value
              this.changeZoneKill(item,index,'killHostList')
            } else if (item.post.servicetype == 'G5500') {
              item.zoneList = res.data.result.optionalAreaGpu
              item.zone = res.data.result.optionalAreaGpu[0].value
              this.changeZoneKill(item,index,'killHostList')
            } else if (item.post.servicetype == 'high_ip') {
              this.getPriceDDOSIP(item)
            }
          })
        }
      })
    },
    getPriceKill (item) {
      axios.get('activity/getOriginalPrice.do', {
        params: {
          zoneId: item.zone,
          vmConfigId: item.post.id,
          month: item.post.days
        }
      }).then(res => {
        if (res.status == 200 && res.data.status == 1) {
          item.price = res.data.result.cost;
          item.originPrice = res.data.result.originalPrice;
        }
      })
    },
    getPriceDDOSIP (item) {
      axios.get('activity/getOriginalPriceDDosIP.do', {
        params: {
          zoneId: item.zone,
          vmConfigId: item.post.id,
          month: item.post.days
        }
      }).then(res => {
        if (res.status == 200 && res.data.status == 1) {
          item.price = res.data.result.cost;
          item.originPrice = res.data.result.originalPrice;
        }
      })
    },
    changeZoneKill (item, index, name) {
      this.getSystem(item, index, name)
      this.getPriceKill(item)
    },
    // 根据区域获得不同系统
    getSystem (item, index, name) {
      let params = {
        zoneId: item.zone,
      }
      if (item.post.servicetype == 'G5500') {
          params.user = '0'
          params.gpu = '1'
          params.normalTemplate = "0"
      }
      axios.get('information/listTemplates.do', {
        params
      }).then(res => {
        if (res.status == 200 && res.data.status == 1) {
          var x
          for (x in res.data.result) {
            this[name][index].systemList.forEach(item => {
              if (item.value == x) {
                item.children = res.data.result[x]
              }
            })
          }
          this[name][index].systemList.forEach(item => {
            item.children.forEach(item => {
              item.value = item.systemtemplateid
              item.label = item.templatedescript
            })
          })
          this[name][index].systemList.forEach((item, index) => {
            if (item.children.length == 0) {
              item.disabled = true
            }
          })
          // 设置默认系统
          this[name][index].system = ['window', res.data.result.window[0].systemtemplateid]
        }
      })
    },
    // 获取抢购剩余数量
    getSubsection (index) {
      axios.get('activity/getSubsection.do', {
        params: {
          activityNum: '53',
        }
      }).then(res => {
        if (res.status == 200 && res.data.status == 1) {
          res.data.result.forEach((itemed, index) => {
            if (itemed.freevmconfigId == this.killHostList[index].post.id) {
              this.killHostList[index].num = parseInt((itemed.receive / itemed.total) * 100)
            }
          })
        }
      })
    },
    pushOrderKill (item) {
      if (!this.$store.state.userInfo) {
        this.$LR({ type: 'register' })
        return
      }
      if ((!this.authInfo) || (this.authInfo && this.authInfo.authtype == 0 && this.authInfo.checkstatus != 0) || (!this.authInfoPersion && this.authInfo && this.authInfo.authtype == 1 && this.authInfo.checkstatus != 0) || (this.authInfoPersion && this.authInfoPersion.checkstatus != 0 && this.authInfo && this.authInfo.checkstatus != 0)) {
        if (!this.userInfo.phone) {
          this.showModal.cashverification = true
        } else {
          this.showModal.qrCode = true
          this.refreshUserStatus()
        }
        return
      }
      let url = 'information/getDiskcountMv.do'
      if (item.post.servicetype == 'high_host') {
        url = 'activity/getDiskcountHighPreventionMv.do'
      } else if (item.post.servicetype == 'high_ip') {
        url = 'activity/getDiskcountHighIP.do'
      } else if(item.post.servicetype == 'G5500') {
        url = 'activity/getDiskcountGPU.do'
      }
      axios.get(url, {
        params: {
          defzoneid: item.zone,
          vmConfigId: item.post.id,
          osType: item.system[1] ? item.system[1] : ''
        }
      }).then(res => {
        if (res.status == 200 && res.data.status == 1) {
          this.$Message.success('创建订单成功')
          window.open('https://kfi.xrcloud.net/order','_self')
        } else {
          this.hintMsg = res.data.message
          this.showModal.hint = true
        }
      })
    },
    // 获取高仿云服务器的系统
    getSystemDDOS () {
      let url = 'activity/getTemActInfoById.do'
      axios.get(url, {
        params: {
          activityNum: '54'
        }
      }).then(res => {
        axios.get('information/listTemplates.do', {
          params: {
            zoneId: res.data.result.optionalAreaHighPrevention[0].value,
          }
        }).then(res => {
          if (res.status == 200 && res.data.status == 1) {
            var x
            for (x in res.data.result) {
              this.systemDDOSHList.forEach(item => {
                if (item.value == x) {
                  item.children = res.data.result[x]
                }
              })
            }
            this.systemDDOSHList.forEach(item => {
              item.children.forEach(item => {
                item.value = item.systemtemplateid
                item.label = item.templatedescript
              })
            })
            this.systemDDOSHList.forEach((item, index) => {
              if (item.children.length == 0) {
                item.disabled = true
              }
            })
            // 设置默认系统和价格
            this.ddosList.forEach((item, index) => {
              item.system = ['window', res.data.result.window[0].systemtemplateid]
              this.changeDefense(item, item.post[0])
            })
            this.listGT.forEach((item, index) => {
              item.system = ['window', res.data.result.window[0].systemtemplateid]
              this.changeTime(item, item.post[0])
            })
            this.killHostList.forEach((item, index) => {
              if (item.post.servicetype == 'high_host') {
                item.system = ['window', res.data.result.window[0].systemtemplateid]
              }
            })
          }
        })
      })
    },
    getConfigureDDOS (activityNum, arrayName) {
      let url = 'activity/getTemActInfoById.do'
      axios.get(url, {
        params: {
          activityNum: activityNum
        }
      }).then(res => {
        if (res.data.status == 1 && res.status == 200) {
          this[arrayName].forEach((item, index) => {
            item.zone = res.data.result.optionalAreaHighPrevention[0].value
            item.zoneName = res.data.result.optionalAreaHighPrevention[0].name
            if (index == 0) {
              item.post = res.data.result.freevmconfigs.filter(item => {
                return item.cpu == 2 && item.mem == 4
              })
              item.postOne = item.post[0]
            } else if (index == 1) {
              item.post = res.data.result.freevmconfigs.filter(item => {
                return item.cpu == 2 && item.mem == 8
              })
              item.postOne = item.post[0]
            } else if (index == 2) {
              item.post = res.data.result.freevmconfigs.filter(item => {
                return item.cpu == 4 && item.mem == 8
              })
              item.postOne = item.post[0]
            } else if (index == 3) {
              item.post = res.data.result.freevmconfigs.filter(item => {
                return item.cpu == 4 && item.mem == 16
              })
              item.postOne = item.post[0]
            }
          })
        }
      })
    },
    changeDefense (item, item1) {
      item.disk = item1.pronum
      item.postOne = item1
      this.getPriceDDOS(item)
    },
    getPriceDDOS (item) {
      axios.get('activity/getOriginalPrice.do', {
        params: {
          zoneId: item.zone,
          vmConfigId: item.postOne.id,
          month: item.postOne.days / 30
        }
      }).then(res => {
        if (res.status == 200 && res.data.status == 1) {
          item.price = res.data.result.cost;
          item.originPrice = res.data.result.originalPrice;
        }
      })
    },
    pushOrderDDOS (item) {
      if (!this.$store.state.userInfo) {
        this.$LR({ type: 'register' })
        return
      }
      if ((!this.authInfo) || (this.authInfo && this.authInfo.authtype == 0 && this.authInfo.checkstatus != 0) || (!this.authInfoPersion && this.authInfo && this.authInfo.authtype == 1 && this.authInfo.checkstatus != 0) || (this.authInfoPersion && this.authInfoPersion.checkstatus != 0 && this.authInfo && this.authInfo.checkstatus != 0)) {
        if (!this.userInfo.phone) {
          this.showModal.cashverification = true
        } else {
          this.showModal.qrCode = true
          this.refreshUserStatus()
        }
        return
      }
      axios.get('activity/getDiskcountHighPreventionMv.do', {
        params: {
          defzoneid: item.zone,
          vmConfigId: item.postOne.id,
          osType: item.system[1]
        }
      }).then(res => {
        if (res.status == 200 && res.data.status == 1) {
          this.$Message.success('创建订单成功')
          window.open('https://kfi.xrcloud.net/order','_self')
        } else {
          this.hintMsg = res.data.message
          this.showModal.hint = true
        }
      })
    },
    changeTime (item, item1) {
      item.time = item1.days
      item.postOne = item1
      this.getPriceDDOS(item)
    },
    roll (val) {
      this.selectedNav = val
      $('html, body').animate({ scrollTop: val }, 300)
    },
    configVal (val, name) {
      return val[0][name]
    },
    month (val) {
      return val >= 360 ? val / 360 + '年' : val / 30 + '个月'
    },
    killTitle (val) {
      let result = ''
      switch (val) {
        case 'host':
          result = '弹性云服务器'
          break
        case 'high_host':
          result = '高防云服务器'
          break
        case 'high_ip':
          result = 'DDOS高防IP'
          break
        case 'G5500':
          result = 'GPU云服务器'
          break
        default:
          result = ''
      }
      return result
    },
    refreshData() {
      axios.get('network/getTime.do').then(res => {
        if (res.status == 200 && res.data.status == 1) {
          // let now0 = new Date()
          // this.leftTime1 = now0.getTime()
          this.leftTime1 = res.data.result
          let timer = setInterval(() => {
              this.leftTime1 += 1000
              let endTime = new Date(this.leftTime1)
              if (endTime.getHours() == 0 && endTime.getMinutes() == 0 && endTime.getSeconds() == 0){
                  this.getConfigureKill()
                  this.predict()
                  window.clearInterval(timer)
                }
            }, 1000)
        }
      })
    },
    getTime () {
      axios.get('network/getTime.do').then(res => {
        if (res.status == 200 && res.data.status == 1) {
          // 每天6场秒杀，2点、6点、10点、14点、18点、22点开抢
          let hourArray = [2, 6, 10, 14, 18, 22]
          let now = new Date(res.data.result)
          let h = now.getHours()
          let hourPoint = ''
          for (let i = 0; i < hourArray.length - 1; i++) {
            if (h >= hourArray[i] && h < hourArray[i + 1]) {
              hourPoint = hourArray[i + 1]
            } else if (h == 22 || h == 23) {
              hourPoint = 24
            } else if (h == 0 || h == 1) {
              hourPoint = 2
            }
          }
          let nowb = new Date(res.data.result)
          let endTime = ''
          if (hourPoint == 24) {
            endTime = nowb.setHours(hourPoint, 0, 0, 0) + 2 * 60 * 60 * 1000
          } else {
            endTime = nowb.setHours(hourPoint, 0, 0, 0)
          }
          let leftTime = endTime - now.getTime()
          if (leftTime > 0) {
            this.formatTime(leftTime)
            this.timer = setInterval(() => {
              this.formatTime(leftTime)
              leftTime -= 1000
              if (leftTime <= 0) {
                this.getTime()
                this.getConfigureKill()
                window.clearInterval(this.timer)
              }
            }, 1000)
          }
        }
      })
    },
    formatTime (leftTime) {
      this.hh = Math.floor(leftTime / 1000 / 60 / 60 % 24)
      this.m1 = Math.floor(leftTime / 1000 / 60 % 60 / 10)
      this.m2 = Math.floor(leftTime / 1000 / 60 % 60 % 10)
      this.s1 = Math.floor(leftTime / 1000 % 60 / 10)
      this.s2 = Math.floor(leftTime / 1000 % 60 % 10)
    },
    // 刷新用户认证状态
    refreshUserStatus () {
      // console.log('refreshQRCode')
      clearInterval(this.codeTimer)
      this.codeTimer = setInterval(() => {
        this.$http.get('/faceRecognition/getAllStatus.do', { params: { tempCode: this.tempCode } }).then(res => {
          if (res.status == 200 && res.data.status == 1) {
            if (res.data.result.qrCode == 0) {
              this.codeLoseEfficacy = 'lose'
            }
            if (res.data.result.qrCode == 2) {
              this.codeLoseEfficacy = 'scanSuccess'
            }
            if (res.data.result.authStatus == 1) {
              this.init()
              this.showModal.qrCode = false
              clearInterval(this.codeTimer)
            }
            if (res.data.result.authStatus == 0) {
              this.authStatus = true
            } else if (res.data.result.authStatus == 3) {
              this.showModal.authHint = true
            }
          }
        })
      }, 3000)
    },
    // 刷新二维码状态状态
    refreshQRCode: throttle(1000, function () {
      this.authStatus = false
      this.tempCode = this.uuid(6, 16)
      let url = '/faceRecognition/getUserInfoByPcQRCode.do'
      let config1 = {
        phone: this.userInfo.phone ? this.userInfo.phone : this.formCustom.VerificationPhone,
      }
      let params = {
        faceType: '1',
        tempCode: this.tempCode
      }
      params.config = JSON.stringify(config1)
      axios.post(url, params).then(res => {
        if (res.status == 200 && res.data.status == 1) {
          this.$Message.success('刷新成功')
          this.qrConfig.value = res.data.result.url
          this.codeLoseEfficacy = ''
        } else {
          this.codeLoseEfficacy = 'lose'
        }
      })
    }),
    //短信验证码
    getPhoneCode (codeType) {
      if (!this.userInfo.phone && !this.regExpObj.phone.test(this.formCustom.VerificationPhone)) {
        this.$Message.info('请输入正确的手机号')
        return
      }
      if (this.formCustom.VerificationPhone) {
        axios.get('user/isRegister.do', {
          params: {
            username: this.formCustom.VerificationPhone
          }
        }).then(res => {
          if (res.status === 200 && res.data.status === 1) {
            this.$refs.cashverification.validateField('Verificationcode', (text) => {
              if (text == '') {
                var url = ''
                if (codeType == 'code' || codeType == 'againCode' && this.formCustom.newCodeText == '获取验证码') {
                  url = 'user/code.do'
                } else if (codeType == 'voice' && this.formCustom.newCodeText == '获取验证码') {
                  url = 'user/voiceCode.do'
                } else {
                  return false
                }
                axios.get(url, {
                  params: {
                    aim: this.formCustom.VerificationPhone,
                    isemail: 0,
                    vailCode: this.formCustom.Verificationcode
                  }
                }).then(response => {
                  // 发送成功，进入倒计时
                  if (response.status == 200 && response.data.status == 1) {
                    var countdown = 60
                    this.formCustom.newCodeText = `${countdown}S`
                    var Interval = setInterval(() => {
                      countdown--
                      this.formCustom.newCodeText = `${countdown}S`
                      if (countdown == 0) {
                        clearInterval(Interval)
                        this.formCustom.newCodeText = '获取验证码'
                      }
                    }, 1000)
                  } else {
                    this.$message.info({
                      content: response.data.message
                    })
                    this.imgSrc = `user/getKaptchaImage.do?t=${new Date().getTime()}`
                    this.formCustom.Verificationcode = ''
                  }
                })
              }
            })
          } else {
            this.$Message.info('该手机号已被使用')
          }
        })
      }
    },
    Callpresentation () {
      this.$refs.cashverification.validateField('messagecode', (text) => {
        if (text == '') {
          let url = 'user/judgeCode.do'
          let params = {}
          if (this.formCustom.VerificationPhone) {
            params = {
              aim: this.formCustom.VerificationPhone,
              isemail: 0,
              code: this.formCustom.messagecode
            }
          }
          axios.get(url, {
            params
          }).then(res => {
            if (res.data.status == 1 && res.status == 200) {
              if (this.phoneVerifyType === 'identification') {
                this.showModal.cashverification = false
                this.tempCode = this.uuid(6, 16)
                let url = '/faceRecognition/getUserInfoByPcQRCode.do'
                let config = {
                  phone: this.userInfo.phone ? this.userInfo.phone : this.formCustom.VerificationPhone,
                }
                axios.post(url, {
                  faceType: '1',
                  config: JSON.stringify(config),
                  tempCode: this.tempCode
                }).then(res => {
                  if (res.status == 200 && res.data.status == 1) {
                    this.qrConfig.value = res.data.result.url
                    this.showModal.qrCode = true
                    this.codeLoseEfficacy = ''
                    this.refreshUserStatus()
                  } else {
                    this.codeLoseEfficacy = 'lose'
                    this.showModal.qrCode = true
                    this.refreshUserStatus()
                  }
                })
              }
            } else {
              this.$message.info({
                content: res.data.message
              })
            }
          })
        }
      })
    },
    uuid (len, radix) {
      var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split('');
      var uuid = [], i;
      radix = radix || chars.length;

      if (len) {
        // Compact form
        for (i = 0; i < len; i++) uuid[i] = chars[0 | Math.random() * radix];
      } else {
        // rfc4122, version 4 form
        var r;

        // rfc4122 requires these characters
        uuid[8] = uuid[13] = uuid[18] = uuid[23] = '-';
        uuid[14] = '4';

        // Fill in random data.  At i==19 set the high bits of clock sequence as
        // per rfc4122, sec. 4.1.5
        for (i = 0; i < 36; i++) {
          if (!uuid[i]) {
            r = 0 | Math.random() * 16;
            uuid[i] = chars[(i == 19) ? (r & 0x3) | 0x8 : r];
          }
        }
      }
      return uuid.join('');
    },
    toAuthPage () {
      this.showModal.authHint = false
      var paneStatue = {
        vpc: 'VPC',
        vpn: 'remote',
        usercenter: 'certification',
        expenses: 'accountSummary'
      }
      window.open('https://kfi.xrcloud.net/usercenter','_self')
      this.$store.commit('setPane', paneStatue)
    }
  },
  computed: {
    authInfo () {
      return this.$store.state.authInfo ? this.$store.state.authInfo : null
    },
    authInfoPersion () {
      return this.$store.state.authInfoPersion
    },
    userInfo () {
      return this.$store.state.userInfo
    },
    disabled () {
      if (this.formCustom.Verificationcode == '' || this.formCustom.messagecode == '') {
        return true
      } else {
        return false
      }
    }
  },
  watch: {
   
  },
  components: {
    VueQArt
  },
  beforeRouteLeave (to, from, next) {
    clearInterval(this.codeTimer)
    next()
  }
}
</script>

<style rel="stylesheet/less" lang="less" scoped>
.ddos-active {
  font-family: MicrosoftYaHei;
  text-align: center;
  background: url(../../../assets/img/active/ddos/background-2-left.png) 0 700px
    no-repeat;
  background-color: rgba(42, 41, 54, 1);
}
.mb10 {
  margin-bottom: 10px;
}
.headline {
  padding: 50px 0;
  div {
    img:nth-of-type(2) {
      margin: 0 12px;
    }
  }
  p {
    margin-top: 20px;
    font-size: 18px;
    span {
      cursor: pointer;
    }
  }
}
.wrap {
  margin: 0 auto;
  width: 1200px;
}
.btn {
  height: 40px;
  background: linear-gradient(
    128deg,
    rgba(249, 239, 184, 1) 0%,
    rgba(227, 183, 111, 1) 100%
  );
  border-radius: 2px;
  border: none;
  color: #333333;
  font-size: 18px;
}
.pc-nav {
  position: fixed;
  top: 280px;
  left: 0;
  z-index: 100;
}
.nav-a {
  font-size: 14px;
  color: #ffe0a3;
  ul {
    li {
      width: 120px;
      height: 60px;
      padding-top: 10px;
      background: linear-gradient(
        180deg,
        rgba(96, 102, 130, 1) 0%,
        rgba(54, 55, 71, 1) 100%
      );
      color: #ffe0a3;
      cursor: pointer;
      &:hover,
      &.selected {
        background: linear-gradient(
          180deg,
          rgba(254, 231, 190, 1) 0%,
          rgba(252, 202, 138, 1) 100%
        );
        color: #222222;
      }
      span {
        display: inline-block;
        margin-bottom: 4px;
      }
    }
  }
  .back {
    width: 120px;
    height: 60px;
    padding-top: 10px;
    background: linear-gradient(
      180deg,
      rgba(96, 102, 130, 1) 0%,
      rgba(54, 55, 71, 1) 100%
    );
    cursor: pointer;
  }
}
.mobile-nav {
  position: fixed;
  top: 280px;
  left: 0;
  z-index: 100;
  width: 36px;
  height: 116px;
  padding: 20px 8px;
  background: linear-gradient(
    180deg,
    rgba(254, 231, 190, 1) 0%,
    rgba(252, 202, 138, 1) 100%
  );
  font-size: 14px;
  line-height: 18px;
  color: #222222;
  cursor: pointer;
  &:hover {
    > .nav {
      display: block;
    }
  }
  .nav {
    display: none;
    position: absolute;
    top: 0px;
    left: 36px;
  }
}

.banner {
  background: url(../../../assets/img/active/ddos/ddos-banner-bg2.png) no-repeat
    center;
}
.seckill {
  padding: 40px 0 120px;
  background: url(../../../assets/img/active/ddos/background-2-right.png) 100%
    60% no-repeat;
  .top {
    display: flex;
    justify-content: space-between;
    align-items: center;
    .text {
      text-align: left;
      p {
        font-size: 18px;
        font-family: MicrosoftYaHei-Bold;
        font-weight: bold;
        color: rgba(255, 255, 255, 1);
        line-height: 20px;
        span {
          font-family: MicrosoftYaHei;
          font-weight: normal;
          color: #ffd08c;
          cursor: pointer;
        }
      }
    }
    .timer {
      display: flex;
      justify-content: space-between;
      color: #fff;
      font-size: 18px;
      i {
        padding-top: 10px;
        margin-right: 10px;
        font-style: normal;
      }
      div {
        height: 46px;
        span {
          display: inline-block;
          width: 36px;
          height: 46px;
          margin-left: 10px;
          background: linear-gradient(
            180deg,
            rgba(254, 231, 190, 1) 0%,
            rgba(252, 202, 138, 1) 100%
          );
          font-size: 36px;
          font-weight: bold;
          color: rgba(8, 13, 76, 1);
          line-height: 42px;
          &:nth-of-type(1),
          &:nth-of-type(3) {
            margin-right: 10px;
          }
        }
      }
    }
  }
  .product {
    display: flex;
    justify-content: space-between;
    margin-top: 20px;
    text-align: left;
    > div {
      background: #4d4b61;
      width: 224px;
      // height: 390px;
    }
    .head {
      position: relative;
      padding: 25px 0 15px 0;
      border-bottom: 2px solid transparent;
      border-image: url("../../../assets/img/active/ddos/border-bottom.png") 30
        30 stretch;
      color: #fff;
      text-align: center;
      h3 {
        font-size: 20px;
      }
      span {
        display: inline-block;
        line-height: 20px;
        font-size: 12px;
        &:nth-of-type(1) {
          position: absolute;
          left: 0;
          top: 0;
        }
        &:nth-of-type(2) {
          position: absolute;
          left: 56px;
          top: 0;
        }
      }
      .discount {
        width: 56px;
        background: #ff624b;
        color: #fff;
      }
      .new {
        padding: 0 6px;
        background: #ffd08c;
        color: #333;
      }
    }
    .body {
      color: #fff;
      padding: 20px 0px 15px 20px;
      font-size: 14px;
      .params {
        height: 170px;
        > div {
          margin-bottom: 10px;
        }
      }
      .cost {
        > div {
          margin-bottom: 10px;
        }
      }
      .configure {
        padding: 0 20px 10px 0;
        ul {
          display: flex;
          justify-content: space-between;
          li {
            i {
              display: block;
              font-style: normal;
              font-size: 12px;
              font-family: MicrosoftYaHei;
            }
          }
        }
      }
      .s {
        font-size: 16px;
        font-family: Arial-BoldItalicMT;
        font-weight: bold;
        font-style: italic;
        color: #ffd08c;
        span {
          font-size: 16px;
          font-family: Arial-BoldItalicMT;
        }
      }
      .label {
        width: 70px;
        font-size: 14px;
      }
      .price {
        color: #ff624b;
        font-size: 12px;
        span {
          font-size: 24px;
          font-weight: bold;
        }
        i {
          display: inline-block;
          width: 36px;
          height: 20px;
          background: #ff624b;
          border-radius: 10px 10px 10px 0px;
          color: #fff;
          font-style: normal;
          vertical-align: super;
          text-align: center;
        }
      }
      .origin-price {
        font-size: 12px;
        color: #fff;
        text-decoration: line-through;
      }
      button {
        width: 184px;
      }
    }
  }
  .tips {
    margin-top: 20px;
    text-align: left;
    font-size: 16px;
    color: #ffd08c;
  }
}
.first-month {
  // background: rgba(42, 41, 54, 1);
  .product {
    padding-bottom: 80px;
    text-align: left;
    background: linear-gradient(
      360deg,
      rgba(96, 102, 130, 1) 0%,
      rgba(42, 41, 54, 1) 100%
    );
    ul {
      li {
        display: flex;
        height: 130px;
        margin-bottom: 20px;
      }
    }
    .title {
      width: 220px;
      background: url(../../../assets/img/active/ddos/background-3-item.png);
      padding: 39px 0 0 22px;
      p {
        width: 120px;
        font-size: 20px;
        font-family: MicrosoftYaHei-Bold;
        font-weight: bold;
        color: rgba(255, 208, 140, 1);
        line-height: 26px;
      }
    }
    .content {
      display: flex;
      padding: 25px 30px 25px 40px;
      background: #fff;
      color: #222222;
      .left {
        display: flex;
        justify-content: space-between;
        width: 590px;
        padding: 10px 30px 0 0;
        border-right: 1px solid #e2e4f0;
        dl {
          font-size: 14px;
          dt {
            margin-bottom: 12px;
          }
          dd {
            text-align: center;
            line-height: 35px;
            span {
              display: inline-block;
              width: 60px;
              height: 35px;
              line-height: 33px;
              border: 1px solid rgba(235, 193, 98, 1);
              border-left: none;
              cursor: pointer;
              &:nth-of-type(1) {
                border-left: 1px solid rgba(235, 193, 98, 1);
              }
            }
            .select {
              background: linear-gradient(
                130deg,
                rgba(249, 239, 184, 1) 0%,
                rgba(227, 183, 111, 1) 100%
              );
            }
          }
        }
      }
      .right {
        padding-left: 30px;
        width: 320px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        div {
          .text {
            display: inline-block;
            width: 70px;
            height: 21px;
            background: rgba(88, 85, 112, 1);
            color: #ffd08c;
            line-height: 21px;
            text-align: center;
          }
          p {
            margin: 10px 0 5px 0;
            color: #ff624b;
            font-size: 12px;
            span {
              font-size: 20px;
              font-family: MicrosoftYaHei-Bold;
              font-weight: bold;
            }
          }
          i {
            font-size: 12px;
            text-decoration: line-through;
            font-style: normal;
          }
        }
        button {
          width: 150px;
        }
      }
    }
    .tips {
      text-align: center;
      font-size: 14px;
      color: #fff;
      span {
        margin-left: 10px;
        color: #ffd08c;
        cursor: pointer;
      }
    }
  }
}
.super-discount {
  padding-bottom: 50px;
  background: #e2e4f0
    url(../../../assets/img/active/ddos/background-4-right.png) 100% 70%
    no-repeat;
  .product {
    display: flex;
    justify-content: space-between;
    text-align: left;
    > div {
      width: 285px;
      box-shadow: 0px 3px 10px -3px rgba(195, 205, 230, 0.7);
      // border: 1px solid rgba(220, 226, 242, 1);
    }
    .head {
      width: 285px;
      height: 101px;
      padding: 39px 0 0 34px;
      color: #ffd08c;
      background: url("../../../assets/img/active/ddos/background-4-item.png");
      h3 {
        font-size: 24px;
      }
    }
    .body {
      padding: 30px 20px 20px 20px;
      background: #fff;
      > div {
        margin-bottom: 20px;
      }
      .label {
        display: block;
        margin-bottom: 10px;
        width: 80px;
        font-size: 16px;
      }
      .configure {
        ul {
          li {
            margin-bottom: 10px;
            font-size: 16px;
            i {
              margin-bottom: 10px;
              font-style: normal;
            }
          }
        }
      }
      .time {
        ul {
          display: flex;
          flex-wrap: wrap;
          justify-content: space-between;
          li {
            position: relative;
            width: 75px;
            height: 35px;
            border-radius: 2px;
            border: 1px solid rgba(235, 193, 98, 1);
            line-height: 33px;
            text-align: center;
            font-size: 14px;
            color: #222222;
            cursor: pointer;
            &:nth-child(3n + 3) {
              margin-right: 0;
            }
            span {
              position: absolute;
              top: -12px;
              right: -5px;
              display: inline-block;
              width: 32px;
              height: 18px;
              background: rgba(246, 109, 89, 1);
              font-size: 12px;
              color: rgba(255, 255, 255, 1);
              line-height: 16px;
            }
          }
          .selected {
            background: linear-gradient(
              90deg,
              rgba(249, 239, 184, 1) 0%,
              rgba(227, 183, 111, 1) 100%
            );
          }
        }
      }
      .price {
        margin-bottom: 5px;
        color: #ff624b;
        font-size: 16px;
        span {
          font-size: 28px;
          font-weight: bold;
        }
      }
      .origin-price {
        font-size: 16px;
        color: #999999;
        text-decoration: line-through;
      }
      button {
        width: 100%;
      }
      .text {
        margin-top: 15px;
        color: #ff624b;
        font-size: 14px;
      }
    }
  }
  .tips {
    margin-top: 20px;
    font-size: 14px;
    color: #606682;
    cursor: pointer;
  }
}
.give-time {
  padding-bottom: 100px;
  background: #606682;
  .product {
    ul {
      display: flex;
      justify-content: space-between;
      li {
        width: 590px;
        box-shadow: 0px 0px 20px -5px rgba(0, 0, 0, 0.5);
      }
    }
    .top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 36px 40px;
      background: #3e3c4d;
      color: #fff;
      text-align: left;
      .left {
        p {
          font-size: 20px;
          &:nth-of-type(1) {
            margin-bottom: 10px;
            font-size: 24px;
            font-family: MicrosoftYaHei-Bold;
            font-weight: bold;
            span {
              color: #ff624b;
            }
          }
        }
      }
      .right {
        color: #ff624b;
        font-size: 48px;
        font-family: MicrosoftYaHei-Bold;
        font-weight: bold;
        span {
          font-size: 80px;
        }
        i {
          font-size: 40px;
          font-style: normal;
          vertical-align: text-top;
        }
      }
    }
    a {
      display: block;
      width: 100%;
      height: 52px;
      line-height: 52px;
      font-size: 20px;
      background: rgba(250, 221, 152, 1);
    }
  }
}
// 弹窗公共样式
.overlay {
  position: fixed;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  background-color: rgba(55, 55, 55, 0.3);
  height: 100%;
  z-index: 1000;
  > div {
    position: relative;
    margin: 0 auto;
    top: 15%;
    background: rgba(255, 255, 255, 1);
    box-shadow: 0px 2px 8px 0px rgba(0, 0, 0, 0.2);
    border-radius: 4px;
    font-size: 14px;
  }
}
.rule-modal {
  width: 500px;
  .header {
    height: 66px;
    padding-top: 20px;
    padding-right: 30px;
    font-size: 20px;
    color: #ffd08c;
    background: linear-gradient(
      90deg,
      rgba(12, 12, 27, 1) 0%,
      rgba(34, 36, 61, 1) 55%,
      rgba(12, 12, 27, 1) 100%
    );
    span {
      margin-left: 20px;
    }
    img {
      float: right;
      cursor: pointer;
    }
  }
  .body {
    padding: 30px;
    text-align: left;
    font-size: 16px;
    color: #333333;
    p {
      margin-bottom: 10px;
      line-height: 24px;
    }
    dl {
      margin-bottom: 10px;
      dd {
        line-height: 19px;
      }
    }
  }
  .footer {
    padding: 0 30px 30px 30px;
    font-size: 18px;
    color: rgba(31, 31, 114, 1);
    .wrap-f {
      padding-top: 30px;
      border-top: 1px solid rgba(233, 233, 233, 1);
    }
    button {
      width: 150px;
    }
  }
}
.ivu-table td.demo-table-info-column {
  background-color: #2db7f5;
  color: #fff;
}
.qrcode-modal {
  text-align: center;
  .qr-code {
    height: 198px;
    width: 197px;
    background: url("../../../assets/img/app/auth_background.png") no-repeat
      center;
    margin: 30px auto;
    position: relative;
    .shade {
      position: absolute;
      top: 0;
      height: 198px;
      width: 197px;
      background: url("../../../assets/img/app/lose_efficacy.png") center;
      &.scanSuccess {
        background: url("../../../assets/img/app/scan_success.png") center;
      }
    }
  }
  > p {
    font-size: 14px;
    font-family: MicrosoftYaHei;
    color: rgba(51, 51, 51, 1);
    margin: 10px;
    > span {
      color: #ff624b;
    }
  }
  .p-top {
    font-family: MicrosoftYaHei-Bold;
    font-weight: bold;
    color: rgba(237, 64, 20, 1);
  }
  .p-bottom {
    margin-top: 14px;
    margin-bottom: 0;
    > span {
      color: #4297f2;
      cursor: pointer;
    }
  }
}
@media (max-width: 1366px) {
  .mobile-nav {
    display: block;
  }
  .pc-nav {
    display: none;
  }
}
@media (min-width: 1367px) {
  .mobile-nav {
    display: none;
  }
  .pc-nav {
    display: block;
  }
}
</style>